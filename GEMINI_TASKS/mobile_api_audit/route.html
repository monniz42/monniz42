<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile API Full Documentation Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px;
        }
        h1, h2, h3, h4 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        .route-card, .controller-card, .model-card, .section-card {
            background: #ffffff;
            border: 1px solid #e1e1e1;
            border-left: 5px solid #3498db;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.05);
        }
        .route-card h3 {
            margin-top: 0;
            font-size: 1.4em;
            color: #3498db;
        }
        .route-card .method {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 3px;
            color: #fff;
            margin-right: 10px;
        }
        .method-post { background-color: #27ae60; }
        .method-get { background-color: #2980b9; }
        .method-delete { background-color: #c0392b; }
        ul {
            list-style-type: none;
            padding-left: 0;
        }
        li {
            margin-bottom: 10px;
        }
        strong {
            color: #555;
        }
        code {
            background: #ecf0f1;
            padding: 3px 6px;
            border-radius: 3px;
            font-family: "Courier New", Courier, monospace;
        }
        .controller-card h3, .model-card h3 {
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }
        .function-details {
            margin-left: 20px;
            border-left: 3px solid #bdc3c7;
            padding-left: 15px;
        }
        .flow-diagram {
            text-align: center;
            font-size: 1.1em;
        }
        .flow-diagram .step {
            margin: 10px 0;
        }
        .arrow {
            font-size: 1.5em;
            color: #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mobile API Full Documentation Report</h1>

        <h2>1. Global Overview</h2>
        <div class="section-card">
            <p>This document provides a comprehensive overview of the mobile API (version 0) for the Monniz application. The API is responsible for handling all mobile client interactions, including user authentication, profile management, financial transactions (exchanges, withdrawals), KYC verification, and more. It is built on the Laravel framework and utilizes JWT for secure authentication.</p>
        </div>

        <h2>2. Routes Documentation</h2>
        <div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/generate-token</h3>
    <ul>
        <li><strong>Description:</strong> Generates a temporary access token for the mobile application.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 14</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>secret_key</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a new access token, its expiration date, and the remaining time.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/login</h3>
    <ul>
        <li><strong>Description:</strong> Authenticates a user and returns a JWT.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 20</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>identifier</code> (required) - Can be email or mobile number</li>
                <li><code>password</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns the user object and a JWT access token.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/auth/countries</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a list of all supported countries.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 22</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a JSON object containing a list of countries.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/register</h3>
    <ul>
        <li><strong>Description:</strong> Registers a new user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 25</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>lastname</code> (required)</li>
                <li><code>firstname</code> (required)</li>
                <li><code>email</code> (required)</li>
                <li><code>mobile</code> (required)</li>
                <li><code>password</code> (required)</li>
                <li><code>password_confirmation</code> (required)</li>
                <li><code>mobile_code</code> (required)</li>
                <li><code>country_code</code> (required)</li>
                <li><code>country</code> (required)</li>
                <li><code>code_promo</code> (optional)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns the newly created user object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/resend-otp</h3>
    <ul>
        <li><strong>Description:</strong> Resends the One-Time Password (OTP) for account verification.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 27</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>identifier</code> (required) - Can be email or mobile number</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message and the user object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/account-validation</h3>
    <ul>
        <li><strong>Description:</strong> Validates a user's account using the provided OTP.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 29</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>code</code> (required)</li>
                <li><code>identifier</code> (required) - Can be email or mobile number</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/forgot-password</h3>
    <ul>
        <li><strong>Description:</strong> Initiates the password reset process.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 31</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>mobile</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/reset-password</h3>
    <ul>
        <li><strong>Description:</strong> Resets the user's password.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 33</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>mobile</code> (required)</li>
                <li><code>password</code> (required)</li>
                <li><code>confirm_password</code> (required)</li>
                <li><code>token</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/delete-account</h3>
    <ul>
        <li><strong>Description:</strong> Deletes a user's account.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 35</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>identifier</code> (required) - Can be email or mobile number</li>
                <li><code>password</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/auth/save-token</h3>
    <ul>
        <li><strong>Description:</strong> Saves the user's Firebase Cloud Messaging (FCM) token for push notifications.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 37</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>fcm_token</code> (required)</li>
                <li><code>device_type</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/auth/test-push</h3>
    <ul>
        <li><strong>Description:</strong> Sends a test push notification to the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 39</li>
        <li><strong>Authentication:</strong> Public / No Token needed</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/test-api-auth</h3>
    <ul>
        <li><strong>Description:</strong> A test route to check if the user is authenticated.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 44</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the authenticated user object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/limites</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the user's transfer limits.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 46</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the user's transfer limits and remaining amounts.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/notifications</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all notifications for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 50</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a list of notifications.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/notifications/unseen-count</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the count of unseen notifications for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 52</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the count of unseen notifications.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/notifications/read/{id}</h3>
    <ul>
        <li><strong>Description:</strong> Marks a specific notification as read.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 54</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/notifications/set-unseen</h3>
    <ul>
        <li><strong>Description:</strong> Marks all notifications as unseen.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 56</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/users/view</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the authenticated user's profile information.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 61</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the user object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/users/profile</h3>
    <ul>
        <li><strong>Description:</strong> Updates the user's profile information.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 63</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>country_code</code> (required)</li>
                <li><code>country</code> (required)</li>
                <li><code>city</code> (required)</li>
                <li><code>zip</code> (required)</li>
                <li><code>state</code> (required)</li>
                <li><code>address</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns the updated user object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/users/password</h3>
    <ul>
        <li><strong>Description:</strong> Changes the user's password.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 65</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>old_password</code> (required)</li>
                <li><code>new_password</code> (required)</li>
                <li><code>confirm_new_password</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/users/profile-image</h3>
    <ul>
        <li><strong>Description:</strong> Uploads a new profile image for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 67</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>image</code> (required) - Must be a valid image file (jpg, jpeg, png)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns the updated user object with the new profile image URL.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-delete">DELETE</span> /v0/users/delete/{user_id}</h3>
    <ul>
        <li><strong>Description:</strong> Deletes a user's account.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 69</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/exchanges/init</h3>
    <ul>
        <li><strong>Description:</strong> Initiates a new currency exchange.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 74</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>send</code> (required) - The ID of the currency to send</li>
                <li><code>receive</code> (required) - The ID of the currency to receive</li>
                <li><code>send_amount</code> (required)</li>
                <li><code>details</code> (required) - An array of additional details</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns the exchange ID and exchange data.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/exchanges/payment/{id}</h3>
    <ul>
        <li><strong>Description:</strong> Initializes the payment for an exchange.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 76</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the payment URL and other payment data.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/all</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all exchanges for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 78</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a paginated list of exchanges.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/approved</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all approved exchanges for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 80</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a paginated list of approved exchanges.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/pending</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all pending exchanges for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 82</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a paginated list of pending exchanges.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/refunded</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all refunded exchanges for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 84</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a paginated list of refunded exchanges.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/cancel</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all canceled exchanges for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 86</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a paginated list of canceled exchanges.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/transaction/{id}</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a specific exchange by its ID or exchange ID.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 88</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the exchange object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/byperiod</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves exchanges grouped by a specified period (daily, weekly, monthly, yearly).</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 90</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>period</code> (optional) - The period to group by (daily, weekly, monthly, yearly)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a paginated and grouped list of exchanges.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/gateways/countries/for_sell</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a list of countries with available gateways for selling currency.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 95</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>excluded_gateway_id</code> (optional) - The ID of a gateway to exclude from the results</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a list of countries and their available gateways.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/gateways/countries/for_buy</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a list of countries with available gateways for buying currency.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 97</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>excluded_gateway_id</code> (optional) - The ID of a gateway to exclude from the results</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a list of countries and their available gateways.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/gateways/countries/{dial_code}/list/for_sell</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a list of gateways for a specific country for selling currency.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 99</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a list of gateways for the specified country.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/gateways/countries/{dial_code}/list/for_buy</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a list of gateways for a specific country for buying currency.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 101</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a list of gateways for the specified country.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/gateways/{id}</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a specific gateway by its ID.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 103</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the gateway object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/kyc/form</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the KYC (Know Your Customer) form fields.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 108</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a list of KYC form fields.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/kyc/submit</h3>
    <ul>
        <li><strong>Description:</strong> Submits the user's KYC data.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 110</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> The request body should contain the fields defined in the KYC form.</li>
        <li><strong>Success Response:</strong> Returns the updated user object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/kyc/status/{user_id}</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the KYC status for a specific user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 112</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the user's KYC status (true or false) and the rejection reason if applicable.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/quicksend/add</h3>
    <ul>
        <li><strong>Description:</strong> Adds a new quick send template for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 117</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>send</code> (required) - The ID of the currency to send</li>
                <li><code>receive</code> (required) - The ID of the currency to receive</li>
                <li><code>send_amount</code> (required)</li>
                <li><code>details</code> (required) - An array of additional details</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns the newly created quick send object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/quicksend/list</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves all quick send templates for the user.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 119</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a list of quick send templates.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/withdraw/conditions</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the conditions for making a withdrawal.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 124</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the withdrawal conditions, including the minimum required exchange amount and available withdrawal methods.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/withdraw/submit</h3>
    <ul>
        <li><strong>Description:</strong> Submits a new withdrawal request.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 126</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>currency</code> (required) - The ID of the currency to withdraw</li>
                <li><code>send</code> (required) - The amount to send</li>
                <li><code>get_amount</code> (required) - The amount to receive</li>
                <li><code>mobile</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/withdraw/preview/{trx}</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves a preview of a withdrawal request.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 128</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the withdrawal object.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/withdraw/history</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the user's withdrawal history.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 130</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>search</code> (optional) - A search term to filter the results</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a list of withdrawal records.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/affiliation/reffered-and-commission</h3>
    <ul>
        <li><strong>Description:</strong> Retrieves the user's referral and commission data.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 135</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns the user's commission logs, referral percentage, affiliate link, promo code, and a list of referred users.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/affiliation/reffer-link-send</h3>
    <ul>
        <li><strong>Description:</strong> Sends the user's referral link to a specified email address.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 137</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>reffer_link</code> (required)</li>
                <li><code>email</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/exchanges/generate-pdf/{id}</h3>
    <ul>
        <li><strong>Description:</strong> Generates a PDF receipt for a specific exchange.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 142</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a PDF file.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-post">POST</span> /v0/send-sms</h3>
    <ul>
        <li><strong>Description:</strong> Sends an SMS message.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 144</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong>
            <ul>
                <li><code>mobile</code> (required)</li>
            </ul>
        </li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>
<div class="route-card">
    <h3><span class="method method-get">GET</span> /v0/test-api</h3>
    <ul>
        <li><strong>Description:</strong> A test route for the API.</li>
        <li><strong>Path to file and line:</strong> <code>product/application/routes/mobile/v0.php</code>, line 146</li>
        <li><strong>Authentication:</strong> Requires Authentication (Bearer Token)</li>
        <li><strong>Request Body:</strong> None</li>
        <li><strong>Success Response:</strong> Returns a success message.</li>
    </ul>
</div>

        <h2>3. Controllers Documentation</h2>
        <div class="controller-card">
    <h3>Controller: MobileAffiliationController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileAffiliationController.php</code></p>
    <p><strong>Summary:</strong> Handles all affiliation-related logic, including retrieving referral data and sending referral links.</p>
    <div class="function-details">
        <h4>Function: refferedAndCommission</h4>
        <p><strong>Lines:</strong> 12-41</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the authenticated user.</li>
                <li>Retrieves the referral settings.</li>
                <li>Retrieves the list of users referred by the authenticated user.</li>
                <li>Generates a promo code for the user if they don't have one.</li>
                <li>Retrieves the user's commission logs.</li>
                <li>Returns a JSON response with the commission logs, referral percentage, affiliate link, promo code, and the list of referred users.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>Refferal</code>, <code>CommissionLog</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>users</code>, <code>refferals</code>, and <code>commission_logs</code> tables.</p>
        <p><strong>Returns:</strong> A JSON object containing the user's affiliation data.</p>
    </div>
    <div class="function-details">
        <h4>Function: refferlinkSend</h4>
        <p><strong>Lines:</strong> 43-75</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Checks if the user is trying to refer themselves.</li>
                <li>Sends an email with the referral link to the specified email address.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>notify</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>External Services:</strong> Sends an email via the application's email service.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileAuthController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileAuthController.php</code></p>
    <p><strong>Summary:</strong> Handles user authentication, registration, and account validation.</p>
    <div class="function-details">
        <h4>Function: login</h4>
        <p><strong>Lines:</strong> 50-129</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Determines if the user is logging in with an email or mobile number.</li>
                <li>Attempts to authenticate the user with the provided credentials.</li>
                <li>If authentication is successful, it checks if the user's account is verified.</li>
                <li>If the account is verified, it returns a JWT access token and the user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>JWTAuth</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the JWT access token and user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: getCountries</h4>
        <p><strong>Lines:</strong> 133-152</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Reads the list of countries from a JSON file.</li>
                <li>Returns a JSON response with the list of countries.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>Returns:</strong> A JSON object with a list of countries.</p>
    </div>
    <div class="function-details">
        <h4>Function: register</h4>
        <p><strong>Lines:</strong> 155-230</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Checks if the email or mobile number is blacklisted.</li>
                <li>Checks if the email or mobile number is already in use.</li>
                <li>Creates a new user account.</li>
                <li>Returns a JSON response with the newly created user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>BlackListHelper</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the newly created user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: create</h4>
        <p><strong>Lines:</strong> 237-388</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Creates a new user instance with the provided data.</li>
                <li>Handles referral logic if a promo code or reference is provided.</li>
                <li>Saves the new user to the database.</li>
                <li>Creates a transaction and commission log for the referral if applicable.</li>
                <li>Creates an admin notification for the new registration.</li>
                <li>Logs the user's login information.</li>
                <li>Sends an OTP to the user for account verification.</li>
                <li>Returns the newly created user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>Refferal</code>, <code>Transaction</code>, <code>CommissionLog</code>, <code>AdminNotification</code>, <code>UserLogin</code>, <code>notify</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code>, <code>transactions</code>, <code>commission_logs</code>, <code>admin_notifications</code>, and <code>user_logins</code> tables.</p>
        <p><strong>External Services:</strong> Sends an email via the application's email service.</p>
        <p><strong>Returns:</strong> The newly created user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: resendOTP</h4>
        <p><strong>Lines:</strong> 393-431</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Finds the user by their identifier (email or mobile).</li>
                <li>Sends a new OTP to the user.</li>
                <li>Returns a JSON response with a success message and the user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>notify</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> Reads from the <code>users</code> table.</p>
        <p><strong>External Services:</strong> Sends an email via the application's email service.</p>
        <p><strong>Returns:</strong> A JSON object with a success message and the user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: sendOTP</h4>
        <p><strong>Lines:</strong> 433-450</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Generates a new OTP.</li>
                <li>Saves the OTP and the current timestamp to the user's record.</li>
                <li>Sends the OTP to the user via email.</li>
                <li>Returns the user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>notify</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> table.</p>
        <p><strong>External Services:</strong> Sends an email via the application's email service.</p>
        <p><strong>Returns:</strong> The user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: accountValidation</h4>
        <p><strong>Lines:</strong> 452-500</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Finds the user by their identifier (email or mobile).</li>
                <li>Checks if the provided OTP is correct and has not expired.</li>
                <li>If the OTP is valid, it marks the user's account as verified.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Reads from and writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileAuthProfilController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileAuthProfilController.php</code></p>
    <p><strong>Summary:</strong> Handles user profile management, including password changes, profile updates, and account deletion.</p>
    <div class="function-details">
        <h4>Function: forgotPassword</h4>
        <p><strong>Lines:</strong> 19-36</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Generates a password reset token.</li>
                <li>Sends the token to the user via SMS.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>password_resets</code> table.</p>
        <p><strong>External Services:</strong> Sends an SMS via the application's SMS service.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: generateToken</h4>
        <p><strong>Lines:</strong> 38-50</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Generates a new password reset token.</li>
                <li>Checks if a token already exists for the user and updates it if it does, otherwise creates a new one.</li>
                <li>Returns the new token.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> Reads from and writes to the <code>password_resets</code> table.</p>
        <p><strong>Returns:</strong> The new password reset token.</p>
    </div>
    <div class="function-details">
        <h4>Function: createToken</h4>
        <p><strong>Lines:</strong> 51-58</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Creates a new password reset token record in the database.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>password_resets</code> table.</p>
        <p><strong>Returns:</strong> Nothing.</p>
    </div>
    <div class="function-details">
        <h4>Function: updateToken</h4>
        <p><strong>Lines:</strong> 59-65</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Updates an existing password reset token record in the database.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>password_resets</code> table.</p>
        <p><strong>Returns:</strong> Nothing.</p>
    </div>
    <div class="function-details">
        <h4>Function: resetPassword</h4>
        <p><strong>Lines:</strong> 70-103</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Checks if the provided password reset token is valid.</li>
                <li>If the token is valid, it updates the user's password.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>password_resets</code> table and writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: zoomUser</h4>
        <p><strong>Lines:</strong> 111-121</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the authenticated user's profile information.</li>
                <li>Returns a JSON response with the user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the user's profile information.</p>
    </div>
    <div class="function-details">
        <h4>Function: updateProfile</h4>
        <p><strong>Lines:</strong> 123-176</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Updates the user's profile information.</li>
                <li>Returns a JSON response with the updated user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the updated user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: changePassword</h4>
        <p><strong>Lines:</strong> 181-218</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Verifies the user's old password.</li>
                <li>If the old password is correct, it updates the user's password with the new one.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: uploadProfileImage</h4>
        <p><strong>Lines:</strong> 225-261</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Uploads the new profile image.</li>
                <li>Updates the user's profile with the new image URL.</li>
                <li>Returns a JSON response with the updated user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the updated user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: deleteUser</h4>
        <p><strong>Lines:</strong> 267-285</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Deletes the specified user's account.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Deletes from the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: deleteAccount</h4>
        <p><strong>Lines:</strong> 291-341</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Authenticates the user with the provided credentials.</li>
                <li>If authentication is successful, it deletes the user's account.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code>, <code>JWTAuth</code></p>
        <p><strong>Database Interaction:</strong> Deletes from the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: saveToken</h4>
        <p><strong>Lines:</strong> 344-365</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Saves the user's FCM token to their record.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: testPush</h4>
        <p><strong>Lines:</strong> 368-387</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Sends a test push notification to the authenticated user.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>sendPushNotification</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>External Services:</strong> Sends a push notification via Firebase Cloud Messaging.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileExchangeController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileExchangeController.php</code></p>
    <p><strong>Summary:</strong> Handles all currency exchange-related logic.</p>
    <div class="function-details">
        <h4>Function: apiExchange</h4>
        <p><strong>Lines:</strong> 20-193</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Checks if the user's KYC is verified.</li>
                <li>Validates the send and receive amounts against the currency's limits.</li>
                <li>Calculates the exchange amounts and charges.</li>
                <li>Checks if the user has sufficient transfer limits.</li>
                <li>Creates a new exchange record in the database.</li>
                <li>Processes additional user inputs.</li>
                <li>Checks if the recipient's phone number is blacklisted.</li>
                <li>Performs a risk assessment of the transaction using SEON.</li>
                <li>Returns a JSON response with the exchange ID and exchange data.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code>, <code>Exchange</code>, <code>Gateway</code>, <code>GeneralSetting</code>, <code>User</code>, <code>BlackListHelper</code>, <code>SEONHelpers</code>, <code>TransfertLimitApiHelper</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>exchanges</code> table.</p>
        <p><strong>External Services:</strong> Interacts with the SEON API for fraud detection.</p>
        <p><strong>Returns:</strong> A JSON object with the exchange ID and exchange data.</p>
    </div>
    <div class="function-details">
        <h4>Function: initPayment</h4>
        <p><strong>Lines:</strong> 214-236</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Initializes the payment for the specified exchange using the PayDunya payment gateway.</li>
                <li>Returns a JSON response with the payment URL and other payment data.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>PayInProcessController</code></p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>External Services:</strong> Interacts with the PayDunya API.</p>
        <p><strong>Returns:</strong> A JSON object with the payment URL and other payment data.</p>
    </div>
    <div class="function-details">
        <h4>Function: allExchange</h4>
        <p><strong>Lines:</strong> 242-306</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves all exchanges for the authenticated user, with optional filtering by status (approved, pending, refunded, canceled).</li>
                <li>Returns a paginated JSON response with the list of exchanges.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Exchange</code>, <code>GeneralSetting</code>, <code>User</code>, <code>TransfertLimitApiHelper</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>exchanges</code> table.</p>
        <p><strong>Returns:</strong> A paginated JSON object with a list of exchanges.</p>
    </div>
    <div class="function-details">
        <h4>Function: getExchange</h4>
        <p><strong>Lines:</strong> 312-337</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves a specific exchange by its ID or exchange ID.</li>
                <li>Returns a JSON response with the exchange object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Exchange</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>exchanges</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the exchange object.</p>
    </div>
    <div class="function-details">
        <h4>Function: exchangesByPeriod</h4>
        <p><strong>Lines:</strong> 400-451</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves exchanges for the authenticated user, grouped by a specified period (daily, weekly, monthly, yearly).</li>
                <li>Returns a paginated and grouped JSON response with the list of exchanges.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Exchange</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>exchanges</code> table.</p>
        <p><strong>Returns:</strong> A paginated and grouped JSON object with a list of exchanges.</p>
    </div>
    <div class="function-details">
        <h4>Function: exchangeGeneratePDF</h4>
        <p><strong>Lines:</strong> 457-485</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Generates a PDF receipt for the specified exchange.</li>
                <li>Returns the PDF file as a stream.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Exchange</code>, <code>User</code>, <code>Dompdf</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>exchanges</code> and <code>users</code> tables.</p>
        <p><strong>Returns:</strong> A PDF file.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileGatewayController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileGatewayController.php</code></p>
    <p><strong>Summary:</strong> Handles the retrieval of payment gateways and their availability in different countries.</p>
    <div class="function-details">
        <h4>Function: getCountries</h4>
        <p><strong>Lines:</strong> 60-155</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves a list of countries with available payment gateways, with optional filtering by type (for_sell, for_buy) and an excluded gateway.</li>
                <li>Returns a JSON response with the list of countries and their available gateways.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>currencies</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a list of countries and their available gateways.</p>
    </div>
    <div class="function-details">
        <h4>Function: gatewaysForCountry</h4>
        <p><strong>Lines:</strong> 161-209</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves a list of available payment gateways for a specific country, with optional filtering by type (for_sell, for_buy).</li>
                <li>Returns a JSON response with the list of gateways.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>currencies</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a list of gateways.</p>
    </div>
    <div class="function-details">
        <h4>Function: getGateway</h4>
        <p><strong>Lines:</strong> 212-229</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves a specific payment gateway by its ID.</li>
                <li>Returns a JSON response with the gateway object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>currencies</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the gateway object.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileKYCController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileKYCController.php</code></p>
    <p><strong>Summary:</strong> Handles the KYC (Know Your Customer) verification process.</p>
    <div class="function-details">
        <h4>Function: kycForm</h4>
        <p><strong>Lines:</strong> 14-34</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the KYC form fields from the database.</li>
                <li>Returns a JSON response with the list of form fields.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Form</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>forms</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a list of KYC form fields.</p>
    </div>
    <div class="function-details">
        <h4>Function: kycSubmit</h4>
        <p><strong>Lines:</strong> 88-155</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the submitted KYC data against the dynamic form rules.</li>
                <li>Saves the user's KYC data to their record.</li>
                <li>Sets the user's KYC status to "pending".</li>
                <li>Creates an admin notification for the new KYC submission.</li>
                <li>Sends an email to the user to notify them of the submission.</li>
                <li>Returns a JSON response with the updated user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Form</code>, <code>User</code>, <code>AdminNotification</code>, <code>notify</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>users</code> and <code>admin_notifications</code> tables.</p>
        <p><strong>External Services:</strong> Sends an email via the application's email service.</p>
        <p><strong>Returns:</strong> A JSON object with the updated user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: kycStatus</h4>
        <p><strong>Lines:</strong> 161-181</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the KYC status for the specified user.</li>
                <li>Returns a JSON response with the user's KYC status (true or false) and the rejection reason if applicable.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>User</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>users</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the user's KYC status.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileOtherExchangeController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileOtherExchangeController.php</code></p>
    <p><strong>Summary:</strong> Handles the creation and retrieval of quick send templates.</p>
    <div class="function-details">
        <h4>Function: addQuickSend</h4>
        <p><strong>Lines:</strong> 12-50</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Checks if a similar quick send template already exists.</li>
                <li>If not, it creates a new quick send template.</li>
                <li>Returns a JSON response with the newly created quick send object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>QuickSend</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>quick_sends</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the newly created quick send object.</p>
    </div>
    <div class="function-details">
        <h4>Function: listQuickSend</h4>
        <p><strong>Lines:</strong> 53-71</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves all quick send templates for the authenticated user.</li>
                <li>Returns a JSON response with the list of quick send templates.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>QuickSend</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>quick_sends</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a list of quick send templates.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobilePublicController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobilePublicController.php</code></p>
    <p><strong>Summary:</strong> Handles various public and miscellaneous API endpoints.</p>
    <div class="function-details">
        <h4>Function: testApiAuth</h4>
        <p><strong>Lines:</strong> 16-24</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>A test route to check if the user is authenticated.</li>
                <li>Returns a JSON response with the authenticated user object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Auth</code></p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>Returns:</strong> A JSON object with the authenticated user object.</p>
    </div>
    <div class="function-details">
        <h4>Function: testApi</h4>
        <p><strong>Lines:</strong> 26-34</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>A test route for the API.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: sendSMS</h4>
        <p><strong>Lines:</strong> 36-66</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Sends an SMS message to the specified mobile number.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>GeneralSetting</code>, <code>Sms</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>general_settings</code> table.</p>
        <p><strong>External Services:</strong> Sends an SMS via the application's SMS service.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: limites</h4>
        <p><strong>Lines:</strong> 69-91</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the user's transfer limits.</li>
                <li>Returns a JSON response with the user's transfer limits and remaining amounts.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>GeneralSetting</code>, <code>User</code>, <code>TransfertLimitApiHelper</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>general_settings</code> and <code>users</code> tables.</p>
        <p><strong>Returns:</strong> A JSON object with the user's transfer limits and remaining amounts.</p>
    </div>
    <div class="function-details">
        <h4>Function: getNotifications</h4>
        <p><strong>Lines:</strong> 96-120</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves all notifications for the authenticated user.</li>
                <li>Marks all unseen notifications as seen.</li>
                <li>Returns a JSON response with the list of notifications.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>NotificationLog</code></p>
        <p><strong>Database Interaction:</strong> Reads from and writes to the <code>notification_logs</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a list of notifications.</p>
    </div>
    <div class="function-details">
        <h4>Function: getUnseenNotificationsCount</h4>
        <p><strong>Lines:</strong> 125-137</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the count of unseen notifications for the authenticated user.</li>
                <li>Returns a JSON response with the count of unseen notifications.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>NotificationLog</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>notification_logs</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the count of unseen notifications.</p>
    </div>
    <div class="function-details">
        <h4>Function: readNotification</h4>
        <p><strong>Lines:</strong> 142-163</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Marks a specific notification as read.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>NotificationLog</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>notification_logs</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: setUnseenNotifications</h4>
        <p><strong>Lines:</strong> 168-180</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Marks all notifications as unseen.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>NotificationLog</code></p>
        <p><strong>Database Interaction:</strong> Writes to the <code>notification_logs</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: generateToken</h4>
        <p><strong>Lines:</strong> 186-209</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Generates a temporary access token for the mobile application.</li>
                <li>Returns a JSON response with the new access token, its expiration date, and the remaining time.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> None</p>
        <p><strong>Database Interaction:</strong> None</p>
        <p><strong>Returns:</strong> A JSON object with the new access token, its expiration date, and the remaining time.</p>
    </div>
</div>
<div class="controller-card">
    <h3>Controller: MobileWithdrawController</h3>
    <p><strong>File Path:</strong> <code>product/application/app/Http/Controllers/Mobile/v0/MobileWithdrawController.php</code></p>
    <p><strong>Summary:</strong> Handles all withdrawal-related logic.</p>
    <div class="function-details">
        <h4>Function: withdrawConditions</h4>
        <p><strong>Lines:</strong> 20-46</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the conditions for making a withdrawal, including the minimum required exchange amount and available withdrawal methods.</li>
                <li>Returns a JSON response with the withdrawal conditions.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code>, <code>Exchange</code>, <code>GeneralSetting</code>, <code>User</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>currencies</code>, <code>exchanges</code>, <code>general_settings</code>, and <code>users</code> tables.</p>
        <p><strong>Returns:</strong> A JSON object with the withdrawal conditions.</p>
    </div>
    <div class="function-details">
        <h4>Function: withdrawSubmit</h4>
        <p><strong>Lines:</strong> 48-198</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Validates the request data.</li>
                <li>Checks if the user's KYC is verified.</li>
                <li>Checks if the user has sufficient balance.</li>
                <li>Checks if the recipient's mobile number is blacklisted.</li>
                <li>Validates the withdrawal amount against the currency's limits.</li>
                <li>Checks if the user has met the minimum required exchange amount.</li>
                <li>Checks if the user has any pending withdrawal requests.</li>
                <li>Creates a new withdrawal request in the database.</li>
                <li>Creates an admin notification for the new withdrawal request.</li>
                <li>Sends an email to the user to notify them of the withdrawal request.</li>
                <li>Returns a JSON response with a success message.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code>, <code>Withdrawal</code>, <code>AdminNotification</code>, <code>Exchange</code>, <code>GeneralSetting</code>, <code>User</code>, <code>BlackListHelper</code>, <code>notify</code> (helper function)</p>
        <p><strong>Database Interaction:</strong> Writes to the <code>withdrawals</code> and <code>admin_notifications</code> tables.</p>
        <p><strong>External Services:</strong> Sends an email via the application's email service.</p>
        <p><strong>Returns:</strong> A JSON object with a success message.</p>
    </div>
    <div class="function-details">
        <h4>Function: withdrawPreview</h4>
        <p><strong>Lines:</strong> 200-218</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves a preview of a withdrawal request.</li>
                <li>Returns a JSON response with the withdrawal object.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Withdrawal</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>withdrawals</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the withdrawal object.</p>
    </div>
    <div class="function-details">
        <h4>Function: withdrawLog</h4>
        <p><strong>Lines:</strong> 221-238</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>Retrieves the user's withdrawal history, with optional filtering by a search term.</li>
                <li>Returns a JSON response with the list of withdrawal records.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Withdrawal</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>withdrawals</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with a list of withdrawal records.</p>
    </div>
    <div class="function-details">
        <h4>Function: withdrawAjax</h4>
        <p><strong>Lines:</strong> 244-257</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>An AJAX helper function that retrieves information about a currency for a withdrawal.</li>
                <li>Returns a JSON object with the currency information.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>currencies</code> table.</p>
        <p><strong>Returns:</strong> A JSON object with the currency information.</p>
    </div>
    <div class="function-details">
        <h4>Function: withdrawAjaxInput</h4>
        <p><strong>Lines:</strong> 260-273</p>
        <p><strong>Breakdown:</strong>
            <ol>
                <li>An AJAX helper function that calculates the return value for a withdrawal based on the input amount and currency.</li>
                <li>Returns the calculated return value.</li>
            </ol>
        </p>
        <p><strong>Models/Services Called:</strong> <code>Currency</code></p>
        <p><strong>Database Interaction:</strong> Reads from the <code>currencies</code> table.</p>
        <p><strong>Returns:</strong> The calculated return value.</p>
    </div>
</div>

        <h2>4. Models / Database Layer Summary</h2>
        <div class="model-card">
    <h3>User</h3>
    <p><strong>Table:</strong> <code>users</code></p>
    <p><strong>Purpose:</strong> Stores all user-related information, including authentication credentials, profile details, KYC status, and balances.</p>
    <p><strong>Key Fields:</strong> <code>id</code>, <code>firstname</code>, <code>lastname</code>, <code>email</code>, <code>mobile</code>, <code>password</code>, <code>balance</code>, <code>kv</code> (KYC verified), <code>ev</code> (email verified), <code>sv</code> (SMS verified).</p>
    <p><strong>Relationships:</strong> Has many <code>Exchange</code>, <code>Withdrawal</code>, <code>NotificationLog</code>, <code>QuickSend</code>.</p>
</div>
<div class="model-card">
    <h3>Exchange</h3>
    <p><strong>Table:</strong> <code>exchanges</code></p>
    <p><strong>Purpose:</strong> Records all currency exchange transactions.</p>
    <p><strong>Key Fields:</strong> <code>id</code>, <code>user_id</code>, <code>payment_from</code>, <code>payment_to</code>, <code>get_amount</code>, <code>send_amount</code>, <code>status</code>.</p>
    <p><strong>Relationships:</strong> Belongs to <code>User</code>.</p>
</div>
<div class="model-card">
    <h3>Withdrawal</h3>
    <p><strong>Table:</strong> <code>withdrawals</code></p>
    <p><strong>Purpose:</strong> Records all withdrawal requests.</p>
    <p><strong>Key Fields:</strong> <code>id</code>, <code>user_id</code>, <code>method_id</code>, <code>get_amount</code>, <code>send_amount</code>, <code>status</code>, <code>trx</code> (transaction ID).</p>
    <p><strong>Relationships:</strong> Belongs to <code>User</code>.</p>
</div>
<div class="model-card">
    <h3>Currency</h3>
    <p><strong>Table:</strong> <code>currencies</code></p>
    <p><strong>Purpose:</strong> Stores information about the supported currencies and payment gateways.</p>
    <p><strong>Key Fields:</strong> <code>id</code>, <code>name</code>, <code>cur_sym</code>, <code>buy_at</code>, <code>sell_at</code>, <code>min_exchange</code>, <code>max_exchange</code>, <code>available_for_sell</code>, <code>available_for_buy</code>.</p>
</div>
<div class="model-card">
    <h3>NotificationLog</h3>
    <p><strong>Table:</strong> <code>notification_logs</code></p>
    <p><strong>Purpose:</strong> Logs all notifications sent to users.</p>
    <p><strong>Key Fields:</strong> <code>id</code>, <code>user_id</code>, <code>title</code>, <code>notification_body</code>, <code>status</code>.</p>
    <p><strong>Relationships:</strong> Belongs to <code>User</code>.</p>
</div>
<div class="model-card">
    <h3>QuickSend</h3>
    <p><strong>Table:</strong> <code>quick_sends</code></p>
    <p><strong>Purpose:</strong> Stores user-created templates for quick exchanges.</p>
    <p><strong>Key Fields:</strong> <code>id</code>, <code>user_id</code>, <code>send</code>, <code>receive</code>, <code>send_amount</code>, <code>details</code>.</p>
    <p><strong>Relationships:</strong> Belongs to <code>User</code>.</p>
</div>

        <h2>5. Middleware & Auth Flow</h2>
        <div class="section-card">
            <h3>Authentication Flow</h3>
            <p>The mobile API uses a combination of a custom token middleware (`monniztoken.verify`) and JSON Web Tokens (JWT) for authentication.</p>
            <ol>
                <li>The mobile application first sends a request to the <code>/v0/generate-token</code> endpoint with a secret key to obtain a temporary access token.</li>
                <li>This temporary token is then used to access the public routes within the `monniztoken.verify` middleware group.</li>
                <li>For routes that require user authentication, the mobile application must include a valid JWT in the `Authorization` header as a Bearer token.</li>
                <li>The `jwt.verify` middleware intercepts these requests and verifies the JWT. If the token is valid, the user is authenticated and the request is allowed to proceed to the controller.</li>
            </ol>
            <h3>Key Middleware</h3>
            <ul>
                <li><strong><code>monniztoken.verify</code>:</strong> This custom middleware is responsible for verifying the temporary access token that is generated for the mobile application. It acts as a first layer of security to ensure that only authorized applications can access the API.</li>
                <li><strong><code>jwt.verify</code>:</strong> This middleware, provided by the `tymon/jwt-auth` package, is used to protect routes that require user authentication. It verifies the JWT from the request and ensures that the user is authenticated.</li>
            </ul>
        </div>

        <h2>6. Data Flow Diagram</h2>
        <div class="section-card flow-diagram">
            <div class="step">Frontend Request (e.g., POST /v0/auth/login)</div>
            <div class="arrow">⬇</div>
            <div class="step"><code>routes/mobile/v0.php</code></div>
            <div class="arrow">⬇</div>
            <div class="step">Middleware (e.g., <code>monniztoken.verify</code>)</div>
            <div class="arrow">⬇</div>
            <div class="step">Controller (e.g., <code>MobileAuthController@login</code>)</div>
            <div class="arrow">⬇</div>
            <div class="step">Model (e.g., <code>User::where(...)</code>)</div>
            <div class="arrow">⬇</div>
            <div class="step">Database (e.g., <code>users</code> table)</div>
            <div class="arrow">⬇</div>
            <div class="step">Controller (processes data)</div>
            <div class="arrow">⬇</div>
            <div class="step">JSON Response (e.g., user object and JWT)</div>
            <div class="arrow">⬇</div>
            <div class="step">Frontend</div>
        </div>

        <h2>7. Observations & Recommendations</h2>
        <div class="section-card">
            <h3>Observations</h3>
            <ul>
                <li>The API is well-structured and follows the standard Laravel conventions.</li>
                <li>The use of JWT for authentication is a good practice for mobile APIs.</li>
                <li>The code is generally well-commented and easy to understand.</li>
                <li>There is a good separation of concerns between the controllers.</li>
            </ul>
            <h3>Recommendations</h3>
            <ul>
                <li><strong>Improve Validation:</strong> Some of the validation rules could be more specific. For example, the `mobile` field in the `register` method could be validated to ensure that it is a valid phone number for the specified country.</li>
                <li><strong>Add More Caching:</strong> The application could benefit from more caching, especially for frequently accessed data like the list of countries and gateways.</li>
                <li><strong>Implement API Versioning in the URL:</strong> While the routes are grouped in a `v0` directory, it would be better to include the version number in the URL (e.g., `/api/v0/auth/login`) to make it more explicit.</li>
                <li><strong>Refactor Repetitive Code:</strong> There is some repetitive code that could be refactored into helper functions or services. For example, the logic for retrieving countries and gateways is duplicated in several methods.</li>
            </ul>
        </div>

        <h2>8. Summary</h2>
        <div class="section-card">
            <p>This report provides a comprehensive overview of the mobile API for the Monniz application. The API is well-designed and provides all the necessary functionality for the mobile client. By following the recommendations in this report, the development team can further improve the quality and maintainability of the API.</p>
        </div>
    </div>
</body>
</html>
